<!doctype html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Lesson 10 homework</title>
    <link rel="stylesheet" href="./style.css">
  </head>

  <body>
    <!--Задача №1 "Создать скрывающееся/рвскрывающееся меню"-->
    <div id="exercise_1" class="exercise">
      <div class="conditions">
        При помощи 1 обработчика сделайте (скрытие/раскрытие) пунктов списка
        при сворачивании списка, знак "плюс" должен меняться на "минус"
      </div>
      <div class="solution">
        <div id="toggle-list" class="toggle-list">
          <ul class="toggle-list_list">
            <div class="toggle-list_toggler">
              <div class="toggle-list_toggler_icon">+</div>
              <div class="toggle-list_toggler_label">Страны</div>
            </div>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Россия</div>
                </div>
                <li class="toggle-list_item">Москва</li>
                <li class="toggle-list_item">Питер</li>
                <li class="toggle-list_item">Омск</li>
              </ul>
            </li>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Америка</div>
                </div>
                <li class="toggle-list_item">Нью-Йорк</li>
                <li class="toggle-list_item">Лос-Анджелес</li>
                <li class="toggle-list_item">Чикаго</li>
              </ul>
            </li>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Китай</div>
                </div>
                <li class="toggle-list_item">Шанхай</li>
                <li class="toggle-list_item">Пекин</li>
                <li class="toggle-list_item">Тяньцзинь</li>
              </ul>
            </li>
          </ul>
        </div>
        <script>
          const exercise1 = document.querySelector('#exercise_1');

          const container = document.querySelector('.solution');

          container.addEventListener('click', (event) => {
            if (event.target.className === 'toggle-list_toggler_label' || event.target.className === 'toggle-list_toggler_icon') {
              const toggleItem = event.target.previousElementSibling || event.target;
              if (toggleItem.textContent === '+') {
                toggleItem.textContent = '-';
              } else {
                toggleItem.textContent = '+';
              }
              Array.from(event.target.closest('.toggle-list_list').querySelectorAll("li")).forEach((el) => {
                if (el.style.display === 'none') {
                  el.style.display = 'block';
                } else {
                  el.style.display = 'none';
                }
              })
            }
          });
        </script>
      </div>
    </div>

    <!--Задача №2 "Оживить карусель"-->
    <div id="exercise_2" class="exercise">
      <div class="conditions">
        <p>
          При клике на синюю кнопку, карусель должна прокрутиться на 1 элемент вправо (если мы не достигли конца)
        </p>
        <p>
          При клике на красную кнопку карусель должна прокрутиться на 1 элемент влево (если мы не достигли начала)
        </p>
        <p>
          <em>
            Постарайтесь написать свою разметку html, чтобы понять принцип работы карусели
          </em>
        </p>
      </div>
      <div class="solution">
        <div class="carousel">
          <div class="carousel_button carousel_button_prev"></div>
          <div class="carousel_button carousel_button_next"></div>
          <div class="carousel_list_wrapper">
            <ul class="carousel_list">
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/1.png" alt="smile-1">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/2.png" alt="smile-2">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/3.png" alt="smile-3">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/4.png" alt="smile-4">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/5.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/6.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/7.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/8.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/9.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/10.png" alt="">
              </li>
            </ul>
          </div>
        </div>
        <script>
          const exercise2 = document.querySelector('#exercise_2');

          const buttonPrev = document.querySelector('.carousel_button_prev');
          const buttonNext = document.querySelector('.carousel_button_next');

          const list = document.querySelector(".carousel_list");

          const itemList = document.querySelector(".carousel_list_item");
          const itemWidth = itemList.clientWidth;


          buttonPrev.addEventListener('click', (event) => {
            const { left } = itemList.getBoundingClientRect();
            const marginLeft = itemList.style.marginLeft;
            const substr = marginLeft.substring(0, marginLeft.length - 2);
            if (+substr >= itemWidth * 2) return;
            itemList.style.marginLeft = `${+substr + +itemWidth}px`;
          });

          buttonNext.addEventListener('click', (event) => {
            const { left } = itemList.getBoundingClientRect();
            const marginLeft = itemList.style.marginLeft;
            const substr = marginLeft.substring(0, marginLeft.length - 2);
            if (+substr <= -itemWidth * 9) return;
            itemList.style.marginLeft = `${+substr - +itemWidth}px`;
          });

        </script>
      </div>
    </div>

    <!--Задача №3 "Поведение подсказка"-->
    <div id="exercise_3" class="exercise">
      <div class="conditions">
        При наведении мыши на элемент <em>(количество таких элементов на странице может быть любым)</em> с атрибутом
        data-tooltip,
        над ним должна показываться подсказка и скрываться при переходе на другой элемент.
      </div>
      <div class="solution">
        <div class="article">
          <p>
            Товарищи! сложившаяся структура организации представляет собой интересный эксперимент проверки направлений
            прогрессивного развития. С другой стороны рамки и место обучения кадров способствует подготовки и реализации
            модели развития.
          </p>
          <button data-tooltip="эта подсказка длиннее, чем элемент">Короткая кнопка</button>
          <button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>
        </div>
        <script>
          const exercise3 = document.querySelector('#exercise_3');

          const article = document.querySelector(".article");
          const elementsWithTooltips = document.querySelectorAll("*[data-tooltip]")

          Array.from(elementsWithTooltips).forEach(el => {
            el.addEventListener("mouseenter", (event) => {
              const element = event.target;
              const offsetLeft = element.offsetLeft;
              const offsetTop = element.offsetTop;
              const elementTooltip = document.createElement("div");
              elementTooltip.className = "tooltip";
              elementTooltip.innerHTML = element.dataset.tooltip;
              element.before(elementTooltip);
              const { clientHeight } = elementTooltip;
              elementTooltip.style.cssText = `
                border: 1px solid black;
                border-radius: 5px;
                background-color: grey;
                padding: 3px;
                color: white;
                z-index: 1000;
                position: absolute;
                top: ${offsetTop - clientHeight - 5}px;
                left: ${offsetLeft}px;
              `;
            });

            el.addEventListener("mouseleave", (event) => {
              const elementTooltip = document.querySelector(".tooltip");
              elementTooltip.remove();
            });
          });

        </script>
      </div>
    </div>

    <!--Задача №4 Самостоятельно: "Отмена действия по умолчанию"-->
    <div id="exercise_4" class="exercise">
      <div class="conditions">
        Решить при помощи делегирования
        Можно добавить в html любые атрибуты
      </div>
      <div class="solution">
        <div class="menu_highlight">
          <ul class="menu_highlight_list">
            <li class="menu_highlight_item">
              <a href="https://yandex.ru">
                Переход на yandex только при клике правой кнопкой мыши
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://google.ru">
                <strong>
                  Переход на google только при двойном клике
                </strong>
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://mail.ru">
                <em>
                  Переход на mail только при клике с нажатой кнопкой 'Shift'
                </em>
              </a>
            </li>
          </ul>
        </div>
        <script>
          const exercise4 = document.querySelector('#exercise_4');

          exercise4.addEventListener('click', (event) => {
            event.preventDefault();

            if (event.shiftKey && event.target.closest('a').getAttribute('href') === "https://mail.ru") {
              window.location.assign(event.target.closest('a').href);
            }

          });

          exercise4.addEventListener('dblclick', (event) => {
            if (event.target.closest('a').getAttribute('href') === "https://google.ru") {
              window.location.assign(event.target.closest('a').href);
            }
          });

          exercise4.addEventListener('contextmenu', (event) => {

            if (event.target.closest('a').getAttribute('href') === "https://yandex.ru") {
              event.preventDefault();
              window.location.assign(event.target.closest('a').href);
            }

          });

        </script>
      </div>
    </div>
  </body>

</html>