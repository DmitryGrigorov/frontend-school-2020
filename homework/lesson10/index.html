<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lesson 10 homework</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!--Задача №1 "Создать скрывающееся/рвскрывающееся меню"-->
    <div id="exercise_1" class="exercise">
      <div class="conditions">
        При помощи 1 обработчика сделайте (скрытие/раскрытие) пунктов списка при
        сворачивании списка, знак "плюс" должен меняться на "минус"
      </div>
      <div class="solution">
        <div id="toggle-list" class="toggle-list">
          <ul class="toggle-list_list">
            <div class="toggle-list_toggler">
              <div class="toggle-list_toggler_icon">+</div>
              <div class="toggle-list_toggler_label">Страны</div>
            </div>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Россия</div>
                </div>
                <li class="toggle-list_item">Москва</li>
                <li class="toggle-list_item">Питер</li>
                <li class="toggle-list_item">Омск</li>
              </ul>
            </li>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Америка</div>
                </div>
                <li class="toggle-list_item">Нью-Йорк</li>
                <li class="toggle-list_item">Лос-Анджелес</li>
                <li class="toggle-list_item">Чикаго</li>
              </ul>
            </li>
            <li class="toggle-list_item">
              <ul class="toggle-list_list">
                <div class="toggle-list_toggler">
                  <div class="toggle-list_toggler_icon">+</div>
                  <div class="toggle-list_toggler_label">Китай</div>
                </div>
                <li class="toggle-list_item">Шанхай</li>
                <li class="toggle-list_item">Пекин</li>
                <li class="toggle-list_item">Тяньцзинь</li>
              </ul>
            </li>
          </ul>
        </div>
        <script>
          const exercise1 = document.querySelector("#exercise_1");
          // ...решение здесь

          function hideSiblings(elem) {
            if (elem.nextElementSibling != null) {
              if (!elem.nextElementSibling.hidden) {
                elem.nextElementSibling.hidden = true;
                hideSiblings(elem.nextElementSibling);
              }
            }
          }

          function showSiblings(elem) {
            if (elem.nextElementSibling != null) {
              if (elem.nextElementSibling.hidden) {
                elem.nextElementSibling.hidden = false;
                showSiblings(elem.nextElementSibling);
              }
            }
          }

          exercise1.addEventListener("click", event => {
            if (
              event.target.parentElement.classList.contains(
                "toggle-list_toggler"
              )
            ) {
              if (event.target.parentElement.children[0].textContent == "+") {
                event.target.parentElement.children[0].textContent = "-";
                hideSiblings(event.target.parentElement);
              } else if (
                event.target.parentElement.children[0].textContent == "-"
              ) {
                event.target.parentElement.children[0].textContent = "+";
                showSiblings(event.target.parentElement);
              }
            }
          });
        </script>
      </div>
    </div>

    <!--Задача №2 "Оживить карусель"-->
    <div id="exercise_2" class="exercise">
      <div class="conditions">
        <p>
          При клике на синюю кнопку, карусель должна прокрутиться на 1 элемент
          вправо (если мы не достигли конца)
        </p>
        <p>
          При клике на красную кнопку карусель должна прокрутиться на 1 элемент
          влево (если мы не достигли начала)
        </p>
        <p>
          <em>
            Постарайтесь написать свою разметку html, чтобы понять принцип
            работы карусели
          </em>
        </p>
      </div>
      <div class="solution">
        <div class="carousel">
          <div class="carousel_button carousel_button_prev"></div>
          <div class="carousel_button carousel_button_next"></div>
          <div class="carousel_list_wrapper">
            <ul class="carousel_list">
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/1.png" alt="smile-1" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/2.png" alt="smile-2" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/3.png" alt="smile-3" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/4.png" alt="smile-4" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/5.png" alt="" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/6.png" alt="" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/7.png" alt="" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/8.png" alt="" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/9.png" alt="" />
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/10.png" alt="" />
              </li>
            </ul>
          </div>
        </div>
        <script>
          const exercise2 = document.querySelector("#exercise_2");
          // ...решение здесь
          const picArray = Array.from(
            exercise2.querySelectorAll(".carousel_list_item")
          );
          let currentFirstPicIndex = 0;
          exercise2.addEventListener("click", event => {
            if (event.target.classList.contains("carousel_button_prev")) {
              if (currentFirstPicIndex > 0) {
                picArray[currentFirstPicIndex - 1].hidden = false;
                currentFirstPicIndex--;
              }
            } else if (
              event.target.classList.contains("carousel_button_next")
            ) {
              if (currentFirstPicIndex < picArray.length - 3) {
                picArray[currentFirstPicIndex].hidden = true;
                currentFirstPicIndex++;
              }
            }
          });
        </script>
      </div>
    </div>

    <!--Задача №3 "Поведение подсказка"-->
    <div id="exercise_3" class="exercise">
      <div class="conditions">
        При наведении мыши на элемент
        <em>(количество таких элементов на странице может быть любым)</em> с
        атрибутом data-tooltip, над ним должна показываться подсказка и
        скрываться при переходе на другой элемент.
      </div>
      <div class="solution">
        <div class="article">
          <p>
            Товарищи! сложившаяся структура организации представляет собой
            интересный эксперимент проверки направлений прогрессивного развития.
            С другой стороны рамки и место обучения кадров способствует
            подготовки и реализации модели развития.
          </p>
          <button data-tooltip="эта подсказка длиннее, чем элемент">
            Короткая кнопка
          </button>
          <button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>
        </div>
        <script>
          const exercise3 = document.querySelector("#exercise_3");
          // ...решение здесь
          exercise3.addEventListener('mouseover', (event) => {
            if(event.target.dataset.tooltip) {
              let hint = document.createElement('div');
              hint.classList.add('hint');
              hint.style = 'background-color: white; border: 3px solid blue; position: absolute; bottom: calc(100% + 10px)';
              hint.innerHTML = event.target.dataset.tooltip;
              event.target.appendChild(hint);
              event.target.style = 'position: relative';
            }
            
          })
          exercise3.addEventListener('mouseout', (event) => {
            Array.from(event.target.children).forEach(elem => {
              if (elem.classList.contains('hint')) elem.remove();
            })
          })
        </script>
      </div>
    </div>

    <!--Задача №4 Самостоятельно: "Отмена действия по умолчанию"-->
    <div id="exercise_4" class="exercise">
      <div class="conditions">
        Решить при помощи делегирования Можно добавить в html любые атрибуты
      </div>
      <div class="solution">
        <div class="menu_highlight">
          <ul class="menu_highlight_list">
            <li class="menu_highlight_item">
              <a href="https://yandex.ru" class="yandex">
                Переход на yandex только при клике правой кнопкой мыши
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://google.ru" class="google">
                <strong>
                  Переход на google только при двойном клике
                </strong>
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://mail.ru" class="mail">
                <em>
                  Переход на mail только при клике с нажатой кнопкой 'Shift'
                </em>
              </a>
            </li>
          </ul>
        </div>
        <script>
          const exercise4 = document.querySelector("#exercise_4");
          // ...решение здесь

          let eventTarget;

          exercise4.addEventListener("contextmenu", event => {
            event.target.tagName == "a"
              ? (eventTarget = event.target)
              : (eventTarget = event.target.closest("a"));
            if (eventTarget.className == "yandex") {
              event.preventDefault();
              window.location = eventTarget.href;
            } else {
              event.preventDefault();
            }
          });

          exercise4.addEventListener("dblclick", event => {
            event.target.tagName == "a"
              ? (eventTarget = event.target)
              : (eventTarget = event.target.closest("a"));
            if (eventTarget.className == "google") {
              window.location = eventTarget.href;
            } else {
              event.preventDefault();
            }
          });

          exercise4.addEventListener("click", event => {
            event.target.tagName == "a"
              ? (eventTarget = event.target)
              : (eventTarget = event.target.closest("a"));
            if (eventTarget.className == "mail" && event.shiftKey) {
              window.location = eventTarget.href;
            } else {
              event.preventDefault();
            }
          });
        </script>
      </div>
    </div>
  </body>
</html>
