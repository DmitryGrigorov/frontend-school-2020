<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson 10 homework</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
  <!--Задача №1 "Создать скрывающееся/рвскрывающееся меню"-->
  <div id="exercise_1" class="exercise">
    <div class="conditions">
      При помощи 1 обработчика сделайте (скрытие/раскрытие) пунктов списка
      при сворачивании списка, знак "плюс" должен меняться на "минус"
    </div>
    <div class="solution">
      <div id="toggle-list" class="toggle-list">
        <ul class="toggle-list_list">
          <div class="toggle-list_toggler">
            <div class="toggle-list_toggler_icon">+</div>
            <div class="toggle-list_toggler_label">Страны</div>
          </div>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon">+</div>
                <div class="toggle-list_toggler_label">Россия</div>
              </div>
              <li class="toggle-list_item">Москва</li>
              <li class="toggle-list_item">Питер</li>
              <li class="toggle-list_item">Омск</li>
            </ul>
          </li>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon">+</div>
                <div class="toggle-list_toggler_label">Америка</div>
              </div>
              <li class="toggle-list_item">Нью-Йорк</li>
              <li class="toggle-list_item">Лос-Анджелес</li>
              <li class="toggle-list_item">Чикаго</li>
            </ul>
          </li>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon">+</div>
                <div class="toggle-list_toggler_label">Китай</div>
              </div>
              <li class="toggle-list_item">Шанхай</li>
              <li class="toggle-list_item">Пекин</li>
              <li class="toggle-list_item">Тяньцзинь</li>
            </ul>
          </li>
        </ul>
      </div>
      <script>
const exercise1 = document.querySelector('#exercise_1');
exercise1.querySelectorAll('Div.toggle-list_toggler').forEach((v) => {
 v.addEventListener('click', (e) => {
  let aNeighbors = e.target.closest('Ul.toggle-list_list').children
  Array.from(aNeighbors).forEach((v) => {
   if(v.tagName === 'DIV'){
     let A = v.querySelector('.toggle-list_toggler_icon')
     A.textContent = (A.textContent === '+') ? '-' : '+'
   } else if(v.tagName === 'LI'){
     v.hidden = !v.hidden
   }
  })
 })
})
      </script>
    </div>
  </div>

    <!--Задача №2 "Оживить карусель"-->
    <div id="exercise_2" class="exercise">
      <div class="conditions">
        <p>
          При клике на синюю кнопку, карусель должна прокрутиться на 1 элемент вправо (если мы не достигли конца)
        </p>
        <p>
          При клике на красную кнопку карусель должна прокрутиться на 1 элемент влево (если мы не достигли начала)
        </p>
        <p>
          <em>
            Постарайтесь написать свою разметку html, чтобы понять принцип работы карусели
          </em>
        </p>
      </div>
      <div class="solution">
        <div class="carousel">
          <div class="carousel_button carousel_button_prev"></div>
          <div class="carousel_button carousel_button_next"></div>
          <div class="carousel_list_wrapper">
            <ul class="carousel_list">
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/1.png" alt="smile-1">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/2.png" alt="smile-2">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/3.png" alt="smile-3">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/4.png" alt="smile-4">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/5.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/6.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/7.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/8.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/9.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/10.png" alt="">
              </li>
            </ul>
          </div>
        </div>
        <script>
const exercise2 = document.querySelector('#exercise_2')

let idOfFirstVisible = 0
const countOfVisibleSlides = 3
const countOfSlides = exercise2.querySelector('.carousel_list').children.length
const slides = exercise2.querySelector('.carousel_list').children

function toNext(){
 if(idOfFirstVisible < countOfSlides - countOfVisibleSlides){
  idOfFirstVisible++
  move(idOfFirstVisible)
 }
}

function toPrev(){
 if(idOfFirstVisible > 0){
   idOfFirstVisible--
   move(idOfFirstVisible)
  }
 }

function move(id){ //console.log(id)
 let j = 0
 Array.from(slides).forEach((v, k) => {
  if(k === id){ j = countOfVisibleSlides }
  if(j > 0){
   j--
   v.hidden = false
  } else{
   v.hidden = true
  }
 })
}
move(idOfFirstVisible)

exercise2.querySelector('.carousel_button_next').addEventListener('click', toNext)
exercise2.querySelector('.carousel_button_prev').addEventListener('click', toPrev)
        </script>
      </div>
    </div>

  <!--Задача №3 "Поведение подсказка"-->
  <div id="exercise_3" class="exercise">
    <div class="conditions">
        При наведении мыши на элемент <em>(количество таких элементов на странице может быть любым)</em> с атрибутом data-tooltip,
        над ним должна показываться подсказка и скрываться при переходе на другой элемент.
    </div>
    <div class="solution">
      <div class="article">
        <p>
            Товарищи! сложившаяся структура организации представляет собой интересный эксперимент проверки направлений прогрессивного развития. С другой стороны рамки и место обучения кадров способствует подготовки и реализации модели развития.
        </p>
        <button data-tooltip="эта подсказка длиннее, чем элемент">Короткая кнопка</button>
        <button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>
      </div>
      <script>
const exercise3 = document.querySelector('#exercise_3')
let tooltip = document.createElement('div')
tooltip.style.position = 'absolute'
tooltip.style.zIndex = 1
tooltip.style.backgroundColor = 'yellow'
tooltip.style.padding = '20px'
exercise3.querySelectorAll('*[data-tooltip]').forEach((v) => {
 v.addEventListener('mouseenter', (e) => {
  tooltip.innerHTML = e.target.dataset.tooltip
  e.target.before(tooltip)
  let parent = e.target.parentElement
  parent.style.position = 'relative'
  tooltip.style.top = 0 - tooltip.offsetHeight + parent.querySelector('P').offsetHeight + 'px'

  let coordinates = e.target.getBoundingClientRect() 
  tooltip.style.left = coordinates.left + 'px'
 })
 v.addEventListener('mouseout', (e) => { tooltip.remove() })
})
      </script>
    </div>
</div>

<!--Задача №4 Самостоятельно: "Отмена действия по умолчанию"-->
  <div id="exercise_4" class="exercise">
    <div class="conditions">
      Решить при помощи делегирования
      Можно добавить в html любые атрибуты
    </div>
    <div class="solution">
      <div class="menu_highlight">
        <ul class="menu_highlight_list">
            <li class="menu_highlight_item">
              <a href="https://yandex.ru">
                  Переход на yandex только при клике правой кнопкой мыши
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://google.ru">
                <strong>
                  Переход на google только при двойном клике
                </strong>
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://mail.ru">
                <em>
                  Переход на mail только при клике с нажатой кнопкой 'Shift'
                </em>
              </a>
            </li>
        </ul>
      </div>
      <script>
const exercise4 = document.querySelector('#exercise_4')

Array.from(exercise4.querySelectorAll('A')).forEach((v) => { v.addEventListener('click', (e) => { e.preventDefault() }) })

exercise4.querySelector('.menu_highlight_list Li:nth-of-type(1) > A').addEventListener('contextmenu', function(e){
 document.location.href = e.target.href
})

exercise4.querySelector('.menu_highlight_list Li:nth-of-type(2) > A').addEventListener('dblclick', function(e){
 document.location.href = e.target.parentElement.href
})

exercise4.querySelector('.menu_highlight_list Li:nth-of-type(3) > A').addEventListener('click', function(e){
 if(e.shiftKey){ document.location.href = e.target.parentElement.href }
})
      </script>
    </div>
  </div>
</body>
</html>
