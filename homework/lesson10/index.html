<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson 10 homework</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
  <!--Задача №1 "Создать скрывающееся/рвскрывающееся меню"-->
  <div id="exercise_1" class="exercise">
    <div class="conditions">
      При помощи 1 обработчика сделайте (скрытие/раскрытие) пунктов списка
      при сворачивании списка, знак "плюс" должен меняться на "минус"
    </div>
    <div class="solution">
      <div id="toggle-list" class="toggle-list">
        <ul class="toggle-list_list">
          <div class="toggle-list_toggler">
            <div class="toggle-list_toggler_icon"></div>
            <div class="toggle-list_toggler_label">Страны</div>
          </div>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon"></div>
                <div class="toggle-list_toggler_label">Россия</div>
              </div>
              <li class="toggle-list_item">Москва</li>
              <li class="toggle-list_item">Питер</li>
              <li class="toggle-list_item">Омск</li>
            </ul>
          </li>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon"></div>
                <div class="toggle-list_toggler_label">Америка</div>
              </div>
              <li class="toggle-list_item">Нью-Йорк</li>
              <li class="toggle-list_item">Лос-Анджелес</li>
              <li class="toggle-list_item">Чикаго</li>
            </ul>
          </li>
          <li class="toggle-list_item">
            <ul class="toggle-list_list">
              <div class="toggle-list_toggler">
                <div class="toggle-list_toggler_icon"></div>
                <div class="toggle-list_toggler_label">Китай</div>
              </div>
              <li class="toggle-list_item">Шанхай</li>
              <li class="toggle-list_item">Пекин</li>
              <li class="toggle-list_item">Тяньцзинь</li>
            </ul>
          </li>
        </ul>
      </div>
      <script>
        // ...решение здесь
        const toggle_list = document.querySelectorAll('#exercise_1 .toggle-list_toggler');
        for(let elem of toggle_list)
        {
          elem.addEventListener('click',function(){
            elem.children[0].classList.toggle('toggle-list_toggler_icon-closed');
            const ul_list = elem.parentElement.querySelectorAll('.toggle-list_item');
            ul_list.forEach(e => {e.hidden = !e.hidden;})
          });
        }
        

      </script>
    </div>
  </div>

    <!--Задача №2 "Оживить карусель"-->
    <div id="exercise_2" class="exercise">
      <div class="conditions">
        <p>
          При клике на синюю кнопку, карусель должна прокрутиться на 1 элемент вправо (если мы не достигли конца)
        </p>
        <p>
          При клике на красную кнопку карусель должна прокрутиться на 1 элемент влево (если мы не достигли начала)
        </p>
        <p>
          <em>
            Постарайтесь написать свою разметку html, чтобы понять принцип работы карусели
          </em>
        </p>
      </div>
      <div class="solution">
        <div class="carousel">
          <div class="carousel_button carousel_button_prev"></div>
          <div class="carousel_button carousel_button_next"></div>
          <div class="carousel_list_wrapper">
            <ul class="carousel_list">
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/1.png" alt="smile-1">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/2.png" alt="smile-2">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/3.png" alt="smile-3">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/4.png" alt="smile-4">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/5.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/6.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/7.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/8.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/9.png" alt="">
              </li>
              <li class="carousel_list_item">
                <img src="https://ru.js.cx/carousel/10.png" alt="">
              </li>
            </ul>
          </div>
        </div>
        <script>
          const exercise2 = document.querySelector('#exercise_2');
          // ...решение здесь
          const buttons = exercise2.querySelectorAll(".carousel_button");
          const prev_button = buttons[0];
          const next_button = buttons[1];
          let position = 0;
          const width = 130;
          const num_of_pics=3;
          const ul_list = document.querySelector(".carousel_list");
          const size = ul_list.querySelectorAll(".carousel_list_item").length;

          prev_button.addEventListener('click',function()
          {
            if(position<0)
            {
              position+=width;
              ul_list.style.marginLeft = `${position}px`;
            }

          });
          next_button.addEventListener('click',function()
          {
            if(Math.abs(position)<(size-num_of_pics)*width)
            {
              position-=width;
              ul_list.style.marginLeft = `${position}px`;
            }
          });
        </script>
      </div>
    </div>

  <!--Задача №3 "Поведение подсказка"-->
  <div id="exercise_3" class="exercise">
    <div class="conditions">
        При наведении мыши на элемент <em>(количество таких элементов на странице может быть любым)</em> с атрибутом data-tooltip,
        над ним должна показываться подсказка и скрываться при переходе на другой элемент.
    </div>
    <div class="solution">
      <div class="article">
        <p>
            Товарищи! сложившаяся структура организации представляет собой интересный эксперимент проверки направлений прогрессивного развития. С другой стороны рамки и место обучения кадров способствует подготовки и реализации модели развития.
        </p>
        <button data-tooltip="эта подсказка длиннее, чем элемент">Короткая кнопка</button>
        <button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>
      </div>
      <script>
        const exercise3 = document.querySelector('#exercise_3');
        // ...решение здесь
        let tooltipElem='';
        exercise3.onmouseover =function(event)
        {
          let target = event.target;
          let tooltip = target.dataset.tooltip;
          if (!tooltip) return;
          tooltipElem = document.createElement('div');
          tooltipElem.className = 'tooltip';
          tooltipElem.innerHTML = tooltip;
          // console.log(tooltip);
          exercise3.append(tooltipElem);
          let coords = target.getBoundingClientRect();

          let left = coords.left + (target.offsetWidth - tooltipElem.offsetWidth) / 2;
          if (left < 0) left = 0; 
          let top = coords.top - tooltipElem.offsetHeight - 5;
          if (top < 0) 
          { 
            top = coords.top + target.offsetHeight + 5;
          }

            tooltipElem.style.left = `${left}px`;
            tooltipElem.style.top = `${top}px`;
        };
        exercise3.onmouseout = function(e) 
        {
          if (tooltipElem) 
          {
            tooltipElem.remove();
            tooltipElem = null;
        }

        };
      </script>
    </div>
</div>

<!--Задача №4 Самостоятельно: "Отмена действия по умолчанию"-->
  <div id="exercise_4" class="exercise">
    <div class="conditions">
      Решить при помощи делегирования
      Можно добавить в html любые атрибуты
    </div>
    <div class="solution">
      <div class="menu_highlight">
        <ul class="menu_highlight_list">
            <li class="menu_highlight_item">
              <a href="https://yandex.ru" onclick="event.preventDefault()">
                  Переход на yandex только при клике правой кнопкой мыши
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://google.ru" onclick="return false;">
                <strong>
                  Переход на google только при двойном клике
                </strong>
              </a>
            </li>
            <li class="menu_highlight_item">
              <a href="https://mail.ru" onclick="event.preventDefault()">
                <em>
                  Переход на mail только при клике с нажатой кнопкой 'Shift'
                </em>
              </a>
            </li>
        </ul>
      </div>
      <script>
        const exercise4 = document.querySelector('#exercise_4');
        // ...решение здесь
        const list = exercise4.querySelectorAll('.menu_highlight_item');
        list[0].addEventListener('contextmenu',function(event)
        {
          event.preventDefault();
          document.location.href='https://yandex.ru';
        });
        list[1].addEventListener('dblclick',function(event)
        {
          document.location.href='https://google.ru';
        });
        list[1].addEventListener('dblclick',function(event)
        {
          document.location.href='https://google.ru';
        });
        list[2].addEventListener('click',function(event)
        {
          if(event.shiftKey)
          {
            document.location.href='https://mail.ru';
          }
        });
        // list.forEach(elem =>{elem.addEventListener('click', function(event){
        //   if (event.target.nodeName != 'A') return;
        //       event.preventDefault();
        //     });
        //   });
        //   list[0].addEventListener('contextmenu')
      </script>
    </div>
  </div>
</body>
</html>
